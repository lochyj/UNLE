<!doctype html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js" integrity="sha512-Ch/O6kL8BqUwAfCF7Ie5SX1Hin+BJgYH4pNjRqXdTEqMsis1TUYg+j6nnI9uduPjGaj7DN4UKCZgpvoExt6dkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="./src/gpu-browser.js"></script>
    </head>
    <body>
        <div id="canvas"></div>
        <script type="module">
            import UNLE from './src/main.js'

            let graph = new UNLE({
                "canvas": document.getElementById("canvas"),
                "show_id": false,
                "node_radius": 10,
                "node_color": 0x000000,
                "edge_length": 100,
                "edge_width": 5,
            });

            // systematically generate a random graph where all nodes are connected, but not to themselves
            /*
            let nodes = 1000;
            let edges = 10000;

            graph.generateRandomGraph(graph, edges, nodes);
            */


            /*
            let nodes = 200;
            let edges = 600;

            for (let i = 0; i < nodes; i++) {
                graph.add_node(i);
            }

            for (let i = 0; i < edges; i++) {
                let a = Math.floor(Math.random() * nodes);
                let b = Math.floor(Math.random() * nodes);
                graph.add_edge(a, b);
            }
            */

            // generate a grid like graph
            /*
            let nodes = 30;

            for (let i = 0; i < nodes; i++) {
                for (let j = 0; j < nodes; j++) {
                    graph.add_node(i + j * nodes);
                }
            }

            for (let i = 0; i < nodes; i++) {
                for (let j = 0; j < nodes; j++) {
                    if (i > 0) {
                        graph.add_edge(i + j * nodes, i - 1 + j * nodes);
                    }
                    if (j > 0) {
                        graph.add_edge(i + j * nodes, i + (j - 1) * nodes);
                    }
                }
            }

            // connect the corners of the grid to each other

            //graph.add_edge(0, nodes - 1);
            //graph.add_edge(nodes - 1, nodes * nodes - 1);
            //graph.add_edge(nodes * nodes - 1, nodes * nodes - nodes);
            //graph.add_edge(nodes * nodes - nodes, 0);
            */

            // generate a 3d grid like graph
            ///*

            //THIS REQUIRES A VERY POWERFUL CPU TO RUN!!!!
            let nodes = 16;

            //let nodes = 3;

            for (let i = 0; i < nodes; i++) {
                for (let j = 0; j < nodes; j++) {
                    for (let k = 0; k < nodes; k++) {
                        graph.add_node(i + j * nodes + k * nodes * nodes);
                    }
                }
            }

            for (let i = 0; i < nodes; i++) {
                for (let j = 0; j < nodes; j++) {
                    for (let k = 0; k < nodes; k++) {
                        if (i > 0) {
                            graph.add_edge(i + j * nodes + k * nodes * nodes, i - 1 + j * nodes + k * nodes * nodes);
                        }
                        if (j > 0) {
                            graph.add_edge(i + j * nodes + k * nodes * nodes, i + (j - 1) * nodes + k * nodes * nodes);
                        }
                        if (k > 0) {
                            graph.add_edge(i + j * nodes + k * nodes * nodes, i + j * nodes + (k - 1) * nodes * nodes);
                        }
                    }
                }
            }
            //*/

            // generate a 4d grid like graph
            /*
            let nodes = 5;

            for (let i = 0; i < nodes; i++) {
                for (let j = 0; j < nodes; j++) {
                    for (let k = 0; k < nodes; k++) {
                        for (let l = 0; l < nodes; l++) {
                            graph.add_node(i + j * nodes + k * nodes * nodes + l * nodes * nodes * nodes);
                        }
                    }
                }
            }

            for (let i = 0; i < nodes; i++) {
                for (let j = 0; j < nodes; j++) {
                    for (let k = 0; k < nodes; k++) {
                        for (let l = 0; l < nodes; l++) {
                            if (i > 0) {
                                graph.add_edge(i + j * nodes + k * nodes * nodes + l * nodes * nodes * nodes, i - 1 + j * nodes + k * nodes * nodes + l * nodes * nodes * nodes);
                            }
                            if (j > 0) {
                                graph.add_edge(i + j * nodes + k * nodes * nodes + l * nodes * nodes * nodes, i + (j - 1) * nodes + k * nodes * nodes + l * nodes * nodes * nodes);
                            }
                            if (k > 0) {
                                graph.add_edge(i + j * nodes + k * nodes * nodes + l * nodes * nodes * nodes, i + j * nodes + (k - 1) * nodes * nodes + l * nodes * nodes * nodes);
                            }
                            if (l > 0) {
                                graph.add_edge(i + j * nodes + k * nodes * nodes + l * nodes * nodes * nodes, i + j * nodes + k * nodes * nodes + (l - 1) * nodes * nodes * nodes);
                            }
                        }
                    }
                }
            }
            */

            // generate an interesting looking graph
            /*
            let nodes = 1000;

            for (let i = 0; i < nodes; i++) {
                graph.add_node(i);
            }

            // connect in a line

            for (let i = 0; i < nodes - 1; i++) {
                graph.add_edge(i, i + 1);
            }

            */

            /*
            var input = `
                nodes: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12

                1 -> 2
                2 -> 3
                3 -> 4
                4 -> 1

                1 -> 5
                2 -> 6
                3 -> 7
                4 -> 8

                5 -> 6
                6 -> 7
                7 -> 8
                8 -> 5

                5 -> 9
                6 -> 10
                7 -> 11
                8 -> 12

                9 -> 10
                10 -> 11
                11 -> 12
                12 -> 9
            `

            graph.from_node_language(input)
            */

        </script>
    </body>
</html>
